# Vue-Router çš„ä½¿ç”¨
### ç®€ä»‹
### æ³¨æ„äº‹é¡¹
1. è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨pagesï¼ˆviewï¼‰æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨componentsæ–‡ä»¶å¤¹ã€‚
2. é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«é”€æ¯æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½ã€‚
3. æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„$routeå±æ€§ï¼Œé‡Œé¢å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯ã€‚
4. æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªrouterï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„$routerå±æ€§è·å–åˆ°ã€‚
### æ¨¡æ‹Ÿå‰ç«¯è·¯ç”±
- SPA (Single Page Application)
  - åç«¯è·¯ç”±ï¼ˆæ¥å£ æ€§èƒ½é—®é¢˜ï¼‰
  - å‰ç«¯è·¯ç”± (è§£å†³å‰ç«¯é¡µé¢æ¸²æŸ“æ€§èƒ½é—®é¢˜)
  - å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒ
    - åŸºäºURLåœ°å€çš„hash (hashçš„å˜åŒ–ä¼šå¯¼è‡´æµè§ˆå™¨è®°å½•è®¿é—®å†å²çš„å˜åŒ–ã€
        ä½†æ˜¯hashçš„å˜åŒ–ä¸ä¼šè§¦å‘æ–°çš„URLè¯·æ±‚)åœ¨å®ç°SPAè¿‡ç¨‹ä¸­ï¼Œæœ€æ ¸å¿ƒçš„æŠ€æœ¯ç‚¹å°±æ˜¯å‰ç«¯è·¯ç”±
- :is å±æ€§æŒ‡å®šçš„ç»„ä»¶åç§° æŠŠå¯¹åº”çš„ç»„ä»¶æ¸²æŸ“åˆ° component æ ‡ç­¾æ‰€åœ¨ä½ç½®
- <component></component>  æ ‡ç­¾å¯ä»¥å½“åšæ˜¯ç»„ä»¶çš„å ä½ç¬¦
-  window.onhashchange  å½“ ä¸€ä¸ªçª—å£çš„ hash ï¼ˆURL ä¸­ # åé¢çš„éƒ¨åˆ†ï¼‰æ”¹å˜æ—¶å°±ä¼šè§¦å‘ hashchange äº‹ä»¶
-  window.location.hash   è·å–åˆ°æœ€æ–°çš„hashå€¼
- demo æ¨¡æ‹Ÿå‰ç«¯è·¯ç”±çš„åˆ‡æ¢æ•ˆæœ
  ```html
    <div id='app'>
        <!-- åˆ‡æ¢ç»„ä»¶çš„è¶…é“¾æ¥ -->
        <a href="#one">ONE</a>
        <a href="#two">TWO</a>
        <a href="#three">THERR</a>
        <a href="#four">FOUR</a>
        <component :is="Page"> </component>
    </div>
    <script>
        // ç»„ä»¶
        const one = {
            template: '<h1>é¡µé¢1</h1>'
        }
        const two = {
            template: '<h1>é¡µé¢2</h1>'
        }
        const three = {
            template: '<h1>é¡µé¢3</h1>'
        }
        const four = {
            template: '<h1>é¡µé¢4</h1>'
        }
        var vm = new Vue({
            el: '#app',
            data: { Page: 'one' },
            components: { //æ³¨å†Œç§æœ‰ç»„ä»¶
                one,two,three,four
            }
        })
        // ç›‘å¬window çš„ onhashchange  äº‹ä»¶ æ ¹æ®è·å–åˆ°çš„æœ€æ–°çš„ hash å€¼ åˆ‡æ¢è¦æ˜¾ç¤ºçš„ç»„ä»¶åç§°
        window.onhashchange = function () {
            // é€šè¿‡location.hash è·å–åˆ°æœ€æ–°çš„hashå€¼
            console.log(location.hash);
            //åˆ¤æ–­å½“å‰ urlæ›´æ¢ hashå€¼ï¼ˆ#xxxï¼‰ è¿›è¡ŒåŒ¹é… 
            switch (window.location.hash) {
                case '#one': vm.Page = 'one'
                    break;
                case '#two': vm.Page = 'two'
                    break;
                case '#three': vm.Page = 'three'
                    break;
                case '#four': vm.Page = 'four'
                    break;
            }
        }
  ```
### vue-Router vueè·¯ç”± çš„ä½¿ç”¨
- å®‰è£… yarn add vue-router  vue2åªèƒ½ä½¿ç”¨@3ç‰ˆæœ¬ vue3å¯ä»¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
- <router-link></router-link>     æ˜¯vue ä¸­æä¾›çš„æ ‡ç­¾ é»˜è®¤ä¼šè¢«æ¸²æŸ“ä¸ºaæ ‡ç­¾
- <router-link to="/one">ONE</router-link>    to å±æ€§é»˜è®¤è¢«æ¸²æŸ“ä¸ºhrefå±æ€§   toå±æ€§çš„å€¼é»˜è®¤ä¼šè¢« æ¸²æŸ“ä¸º ä»¥ # å¼€å¤´çš„ hash åœ°å€
- <router-view></router-view>       è·¯ç”±å ä½ç¬¦ (è·¯ç”±å¡«å……ä½) é€šè¿‡è·¯ç”±è§„åˆ™åŒ¹é…åˆ°çš„ç»„ä»¶ å°†ä¼šè¢«æ¸²æŸ“åˆ° router-view æ‰€åœ¨çš„ä½ç½®
- `const router = new VueRouter({})`      åˆ›å»ºè·¯ç”±å®ä¾‹å¯¹è±¡
  - æ¯ä¸ªè·¯ç”±è§„åˆ™éƒ½æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ å…¶ä¸­è‡³å°‘åŒ…æ‹¬ path å’Œ component ä¸¤ä¸ªå±æ€§
  - routes è·¯ç”±è§„åˆ™æ•°ç»„
    - path è¡¨ç¤ºå½“å‰è·¯ç”± åŒ¹é…çš„ hash åœ°å€
    - component è¡¨ç¤ºå½“å‰è·¯ç”±è§„åˆ™å¯¹åº”è¦å±•ç¤ºçš„ç»„ä»¶
    - name å‘½åè·¯ç”±
    - meta:{} è®¾ç½®å…ƒæ•°æ® ï¼ˆè‡ªå®šä¹‰æ•°æ® å¯ç”¨äºè¿›è¡Œæƒé™ç®¡ç†åˆ¤æ–­ï¼‰
    - children:[{}] åµŒå¥—è·¯ç”± 
### åŸºç¡€ç”¨æ³•
1. å®‰è£…vue-routerï¼Œå‘½ä»¤ï¼šnpm i vue-router
2. åº”ç”¨æ’ä»¶ï¼šVue.use(VueRouter)
3. ç¼–å†™routeré…ç½®é¡¹:
```js
  //å¼•å…¥VueRouter
  import VueRouter from 'vue-router'
  //å¼•å…¥Luyou ç»„ä»¶
  import About from '../components/About'
  import Home from '../components/Home'

  //åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™
  const router = new VueRouter({
  	routes:[
  		{
  			path:'/about',
  			component:About
  		},
  		{
  			path:'/home',
  			component:Home
  		}
  	]
  })
  //æš´éœ²router
  export default router
```
4. å®ç°åˆ‡æ¢ï¼ˆactive-classå¯é…ç½®é«˜äº®æ ·å¼ï¼‰
  `<router-link active-class="active" to="/about">About</router-link>`
5. æŒ‡å®šå±•ç¤ºä½ç½® `<router-view></router-view>` è·¯ç”±å ä½ç¬¦
### è·¯ç”±çš„åµŒå¥—
- children å±æ€§ æ·»åŠ å­è·¯ç”±è§„åˆ™ children:[{path:'xxx',component:'xxx'},{}]
- éœ€è¦æ³¨æ„ childrenä¸­ **å­è·¯ç”±pathè·¯å¾„ä¸è¦åœ¨å†™ /**
- ä½†æ˜¯è·³è½¬çš„æ—¶å€™ path è·¯å¾„è¦å†™å…¨
- demo
  ```js
        routes:[
    	{
    		path:'/about',
    		component:About,
    	},
    	{
    		path:'/home',
    		component:Home,
    		children:[ //é€šè¿‡childrené…ç½®å­çº§è·¯ç”±
    			{
    				path:'news', //æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/news
    				component:News
    			},
    			{
    				path:'message',//æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/message
    				component:Message
    			}
    		]
    	}
    ]

    //è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰ï¼š
    <router-link to="/home/news">News</router-link>
  ```
### vue-Router é‡å®šå‘
- é‡å®šå‘(Redirect)å°±æ˜¯é€šè¿‡å„ç§æ–¹æ³•å°†å„ç§ç½‘ç»œè¯·æ±‚é‡æ–°å®šä¸ªæ–¹å‘è½¬åˆ°å…¶å®ƒä½ç½®
- redirect å±æ€§ æŒ‡å®šä¸€ä¸ªæ–°çš„è·¯ç”±åœ°å€ é”®å€¼å¯¹å½¢å¼ redirect:'/xxx'
- demo
  ```js
    const router = new VueRouter({
        routes: [//routesè·¯ç”±è§„åˆ™æ•°ç»„
            // path å½“åŸåœ°å€ä¸º /  ä½¿ç”¨ redirect é‡å®šå‘ä¸º /one åœ°å€
            // redirect å±æ€§ æŒ‡å®šä¸€ä¸ªæ–°çš„è·¯ç”±åœ°å€
            { path: '/', redirect: '/one' },
            { path: '/one', component: One },
        ]
    })
  ```
### å‘½åè·¯ç”±  ç®€åŒ–è·¯ç”±çš„è·³è½¬
- å‘½åè·¯ç”±å°±æ˜¯ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„è¡¨ç¤ºè·¯ç”±çš„è·¯å¾„ ç»™è·¯ç”±è§„åˆ™èµ·ä¸€ä¸ªåˆ«å 
- demo
  ```js
    {
    	path:'/demo',
    	component:Demo,
    	children:[
    		{
    			path:'test',
    			component:Test,
    			children:[
    				{
              name:'hello' //ç»™è·¯ç”±å‘½å
    					path:'welcome',
    					component:Hello,
    				}
    			]
    		}
    	]
    }
    //ç®€åŒ–è·³è½¬
    //ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„
    <router-link to="/demo/test/welcome">è·³è½¬</router-link>

    //ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬
    <router-link :to="{name:'hello'}">è·³è½¬</router-link>

    //ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•°
    <router-link 
    	:to="{
    		name:'hello',
    		query:{
    		   id:666,
                title:'ä½ å¥½'
    		}
    	}"
    >è·³è½¬</router-link>
  ```
### é€šè¿‡è·¯ç”±ç»„ä»¶ä¼ å‚

#### query ä¼ å‚ 
- é€šè¿‡queryä¼ å‚ä¸¤ç§å½¢å¼ 1.å­—ç¬¦ä¸²å½¢å¼ 2.å¯¹è±¡å½¢å¼
- æ¥æ”¶queryå‚æ•° `$route.query.xxx`
- ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åè·¯ç”±æ¥è§„å®šè·³è½¬é¡µ name:'xxx'  ï¼ˆå‰ææ˜¯ routesä¸­ç»™ç»„ä»¶é…ç½®äº†nameï¼‰
- demo
  ```js
        //ä»å½“å‰é¡µ message è·³è½¬åˆ° detailé¡µé¢ å¹¶æºå¸¦å‚æ•°
        // è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•° toçš„å­—ç¬¦ä¸²å†™æ³•
        <router-link :to="`/home/message/detail?id=${m.id}&message=${m.message}`">
          {{ m.message }}
        </router-link>

        //è·³è½¬è·¯ç”±å¹¶æºå¸¦queryå‚æ•° toçš„å¯¹è±¡å†™æ³• 
        <router-link
          :to="{
            path: '/home/message/detail', //ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åè·¯ç”±æ¥è§„å®šè·³è½¬é¡µ name
            query: {
              id: m.id,
              message: m.message,
            },
          }"
        >
          {{ m.message }}
        </router-link>

        //detail é¡µé¢ æ¥æ”¶å‚æ•°
        <div>{{ $route.query.id }}</div>
        <div>{{ $route.query.message }}</div>
  ```

#### params ä¼ å‚
- é¦–å…ˆåœ¨ è·¯ç”±é…ç½®ä¸­æå‰åœ¨pathä¸Š è®¾ç½®å ä½ç¬¦ /:xxx å½¢å¼
- **ç‰¹åˆ«æ³¨æ„ ä½¿ç”¨ params å¯¹è±¡å†™æ³•æ—¶ ä¸èƒ½ä½¿ç”¨pathç±»å‹è·¯å¾„  åªèƒ½ä½¿ç”¨å‘½åè·¯ç”± name**
- demo
  ```js
  //é…ç½®
    const routes = [
    {
      path: '/home',
      component: Home,
      children: [
        {
          path: 'message',
          component: Message,
          children: [
            {
              name: 'detail', //å‘½åè·¯ç”±
              path: 'detail/:id/:message', //paramsä¼ å‚ æå‰è®¾ç½®å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°
              component: Detail,
            },
          ]
        },
      ]
    },
  ]

  //ä¼ å‚
  //è·³è½¬è·¯ç”±å¹¶æºå¸¦ params å‚æ•° toçš„å­—ç¬¦ä¸²å†™æ³•
        <router-link :to="`/home/message/detail/1234/abcd`">
          {{ m.message }}
        </router-link>

  //è·³è½¬è·¯ç”±å¹¶æºå¸¦ params å‚æ•° toçš„å¯¹è±¡å†™æ³•
  //ç‰¹åˆ«æ³¨æ„ ä½¿ç”¨ params å¯¹è±¡å†™æ³•æ—¶ ä¸èƒ½ä½¿ç”¨pathç±»å‹è·¯å¾„  åªèƒ½ä½¿ç”¨å‘½åè·¯ç”± name
        <router-link
          :to="{
            name: 'detail',
            params: {
              id: m.id,
              message: m.message,
            },
          }"
        >
          {{ m.message }}
        </router-link>
  // æ¥æ”¶å‚æ•°  åŒquery
   <div>{{ $route.params.id }}</div>
    <div>{{ $route.params.message }}</div>
  ```

#### props ä¼ å‚
- è°æ¥æ”¶å‚æ•° å°±ç»™è°routesä¸Šé…ç½® props
- props çš„å€¼ä¸ºå¸ƒå°”ç±»å‹  props:true/false è®¾ç½®ä¸ºtrueæ—¶ route.params å°†ä¼šè¢«è®¾ç½®ä¸ºç»„ä»¶å±æ€§
  - åœ¨ç»„ä»¶ä¸­åŒæ ·ä½¿ç”¨ props:['xxx'] æ¥æ”¶ è·¯ç”±å‚æ•°ï¼ˆï¼‰
- ä¼ å‚å½¢å¼ 
  - 1.props ä¸ºå¸ƒå°”å½¢å¼    å¸ƒå°”å€¼ä¸ºçœŸ å°±ä¼šæŠŠè¯¥è·¯ç”±ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰ params å‚æ•° ä»¥propsçš„å½¢å¼ä¼ ç»™ å¯¹åº” ç»„ä»¶
  - 2.props å€¼ä¸ºå¯¹è±¡å½¢å¼  å€¼ä¸ºå¯¹è±¡ è¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰key-value éƒ½ä¼šä»¥propsçš„å½¢å¼ä¼ ç»™ å¯¹åº” ç»„ä»¶  **ä¸ºå¯¹è±¡å½¢å¼çš„æ—¶å€™ åŠ¨æ€è·¯ç”±çš„ hashè·¯å¾„å€¼è·å–ä¸åˆ°**
  - 3.props å€¼ä¸ºå‡½æ•°å½¢å¼  ä¼ å‚å½¢å¼query
- propsä¸ºå¸ƒå°”å€¼æ—¶ ä½¿ç”¨params ä¸ºå‡½æ•°æ—¶ ä½¿ç”¨query
- demo
  ```js
          {
      path: '/home',
      component: Home,
      children: [
        {
          path: 'message',
          component: Message,
          children: [
            {
              name: 'detail', //å‘½åè·¯ç”±
              // path: 'detail/:id/:message', //å ä½ params   propsä¸ºå¸ƒå°”å€¼æ—¶ 
              path: 'detail',
              component: Detail,
              // æ–¹å¼1 å€¼ä¸ºå¯¹è±¡ è¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰key-value éƒ½ä¼šä»¥propsçš„å½¢å¼ä¼ ç»™detailç»„ä»¶
              // props: { a: 1, b: 2 }
              // æ–¹å¼2 å€¼ä¸ºå¸ƒå°”å€¼ å¸ƒå°”å€¼ä¸ºçœŸ å°±ä¼šæŠŠè¯¥è·¯ç”±ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰ params å‚æ•° ä»¥propsçš„å½¢å¼ä¼ ç»™detailç»„ä»¶
              // props: true
              // æ–¹å¼3 å€¼ä¸ºå‡½æ•°
              // æ™®é€šå†™æ³•
              /*  props (route) {
                 return {
                   id: route.query.id,
                   message: route.query.message
                 }
               } */
              //  ç®€å†™å½¢å¼ ç®€å•è§£æ„èµ‹å€¼
              /*   props ({ query }) {
                  return {
                    id: query.id, message: query.message
                  }
                } */
              // è¿ç»­è§£æ„èµ‹å€¼
              props ({ query: { id, message } }) {
                return {
                  id, message
                }
              }
            },
          ]
        }
      ]


      //ä¼ å‚
      //propsä¸ºå¸ƒå°”å€¼æ—¶ ä½¿ç”¨params ä¸ºå‡½æ•°æ—¶ ä½¿ç”¨query
       <router-link
          :to="{
            name: 'detail',
            query: {
              id: m.id,
              message: m.message,
            },
          }"
        >
          {{ m.message }}
        </router-link>
      </li>

  ```
###  `<router-link>` çš„replaceå±æ€§
- æ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼
- 1. æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸ºpushå’Œreplaceï¼Œpushæ˜¯è¿½åŠ å†å²è®°å½•ï¼Œreplaceæ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚è·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸ºpush
- 2. å¼€å¯replaceæ¨¡å¼ï¼š`<router-link replace .......>News</router-link>`
### ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª
- ä¸å€ŸåŠ© `<router-link>` å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»
- this.$router.push('/xxx') è·³è½¬åˆ°æŒ‡å®šçš„urlè·¯å¾„
- this.$router.replace('/xxx') è·³è½¬åˆ°æŒ‡å®šçš„url è·¯å¾„, ä½†æ˜¯history æ ˆä¸­ä¸ä¼šæœ‰è®°å½•, ç‚¹å‡»è¿”å›å°±ä¼šè·³è½¬åˆ°ä¸Šä¸Šä¸ªé¡µé¢, (å°±æ˜¯ç›´æ¥æ›¿æ¢äº†å½“å‰çš„é¡µé¢)
- demo
  ```js
  //è§¦å‘äº‹ä»¶è°ƒç”¨è¿›è¡Œè·³ å¹¶æºå¸¦å‚æ•° æ¥æ”¶å‚æ•°åŒæ ·ä½¿ç”¨ props
    methods: {
    pushShow(m) {
      this.$router.push({ //push ä¼šè®°å½•è·³è½¬å†å²
        name: "detail",
        query: {
          id: m.id,
          message: m.message,
        },
      });
    },
    replaceShow(m) {
      this.$router.replace({ //replace ä¸ä¼šè®°å½•è·³è½¬å†å² ç›´æ¥æ›¿æ¢
        name: "detail",
        query: {
          id: m.id,
          message: m.message,
        },
      });
    },
    },
  ```
### æ¨ªè·¨å†å² ï¼ˆé¡µé¢çš„å‰è¿›åé€€ï¼‰
- this.$router.forward() //å‰è¿›
- this.$router.back() //åé€€
- this.$router.go(+-n) å‘å‰æˆ–è€…å‘åè·³è½¬nä¸ªé¡µé¢,  n å¯ä»¥ä¸ºæ­£æ•´æ•°ä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•´æ•°
- demo
  ```js
    <template>
    <div>
      <button @click="back">åé€€</button>
      <button @click="forward">å‰è¿›</button>
      <button @click="go">go å›é€€3ä¸ªé¡µé¢</button>
    </div>
    </template>

    methods: {
    back() {
      this.$router.back();
    },
    forward() {
      this.$router.forward();
    },
    go() {
      // æ­£ä¸ºå‰è¿› è´Ÿä¸ºåé€€
      this.$router.go(-3);
    },
   
  },
      
  ```
### keep-alive ç¼“å­˜è·¯ç”±ç»„ä»¶  
- è®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯
- **å¡«å†™çš„ç»„ä»¶å ä¸ºç»„ä»¶å†…çš„name**
- å¦‚æœä¸ä½¿ç”¨ include æŒ‡å®šéœ€è¦ç¼“å­˜çš„è·¯ç”±ç»„ä»¶å é‚£ä¹ˆå½“å‰ç»„ä»¶å†…çš„æ‰€æœ‰å­ç»„ä»¶éƒ½å°†è¿›è¡Œç¼“å­˜ ä¸è¢«é”€æ¯
- `include="item1"` ä¸ºéœ€è¦ç¼“å­˜çš„è·¯ç”±ç»„ä»¶ ï¼ˆå•ä¸ªï¼‰
- `:include="['item1', 'item2']"` ï¼ˆå¤šä¸ªï¼‰
- demo
  ```js
    <keep-alive include="item1"> 
    <router-view></router-view>
    </keep-alive>
  ```
### è·¯ç”±ç‹¬æœ‰çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ **activated  deactivated**
- è·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€
- activated è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘
- deactivated è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘
- åœºæ™¯ï¼šå½“ç»„ä»¶ä½¿ç”¨äº† keep-alive ç¼“å­˜äº†å½“å‰è·¯ç”±ç»„ä»¶ å½“å‰ç»„ä»¶ä¸­æœ‰ä¸€ä¸ªå®šæ—¶å™¨ è¿›å…¥æ—¶å¼€å§‹æ‰§è¡Œï¼Œé€€å‡ºæ—¶å…³é—­ï¼Œå› ä¸ºç¼“å­˜äº†ç»„ä»¶ å¯¼è‡´ç¦»å¼€å½“å‰é¡µé¢æ—¶æ— æ³•é”€æ¯å½“å‰ç»„ä»¶ï¼Œå®šæ—¶å™¨ä¹Ÿæ— æ³•æ¸…é™¤äº† æ­¤æ—¶ä½¿ç”¨ è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸåˆšå¥½è§£å†³é—®é¢˜
- demo
  ```js
    activated() {
    console.log("ç»„ä»¶è¢«æ¿€æ´»");
    this.timer = setInterval(() => {
      console.log("ğŸ¤ª");
      this.opacity -= 0.01;
      if (this.opacity < 0) this.opacity = 1;
    }, 16);
    },

    deactivated() {
      console.log("ç»„ä»¶å¤±æ•ˆ");
      // æ¸…é™¤å®šæ—¶å™¨
      clearInterval(this.timer);
    },
  ```
### **è·¯ç”±å®ˆå«**
1. ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶
2. åˆ†ç±»ï¼šå…¨å±€å®ˆå«ï¼ˆå…¨å±€å‰ç½®åç½®ï¼‰ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«
3. åœ¨è·¯ç”±æ–‡ä»¶ä¸­è¿›è¡Œè®¾ç½® router/index.js

#### å…¨å±€å‰ç½®è·¯ç”±å®ˆå«
- å…¨å±€å‰ç½®è·¯ç”±å®ˆå« åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ä¸€æ¬¡ æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨
- è¯­æ³•ï¼š` router.beforeEach((to,from,next)=>{})`
  - form  è¡¨ç¤ºæ¥è‡ªäºå“ªé‡Œ
  - to    è¡¨ç¤ºå»å“ªé‡Œ
  - next()  è¡¨ç¤ºæ‰§è¡Œä¸‹å»
- routes ä¸­é…ç½® meta{isAuth:true} å…ƒä¿¡æ¯ ç”¨äºåˆ¤æ–­ é€šè¿‡ to.meta å¯ä»¥è·å–åˆ°è®¾ç½®çš„å…ƒä¿¡æ¯
- æƒé™åˆ¤æ–­æµç¨‹ï¼šå½“ç‚¹å‡»é¡µé¢æ—¶è¿›è¡Œåˆ¤æ–­è¯¥é¡µé¢æ˜¯å¦æ˜¯éœ€è¦æƒé™çš„é¡µé¢ ä¸éœ€è¦åˆ™ç›´æ¥è®¿é—® éœ€è¦åˆ™åœ¨è¿›è¡Œä¸‹ä¸€æ­¥åˆ¤æ–­ è¿›å…¥æ ¡éªŒ åˆ¤æ–­tokenï¼ˆè¿™é‡Œä½¿ç”¨localStorageæ¨¡æ‹Ÿï¼‰tokenåˆæ³•åˆ™æœ‰æƒé™è®¿é—®
- demo
  ```js

    //è®¾ç½®å…ƒæ•°æ®
     {
        path: 'news',
        name: 'news',
        component: News,
        meta: { isAuth: true, title: 'æ–°é—»' } //è®¾ç½®å…ƒæ•°æ®
    },

    router.beforeEach((to, from, next) => {
      console.log('å‰ç½®è·¯ç”±å®ˆå«', to, from);
      // if (localStorage.getItem('test') === 'abcd') next()

      // å•ç‹¬é™åˆ¶ ä¸¤ä¸ªé¡µé¢éœ€è¦æƒé™æ‰å¯ä»¥è®¿é—® å…¶ä»–çš„éƒ½å¯ä»¥è®¿é—®
      // ä½¿ç”¨pathè·¯å¾„åˆ¤æ–­ ä¹Ÿå¯ä»¥ä½¿ç”¨ name è·¯ç”±å‘½ååˆ¤æ–­
      // æ–¹å¼1 to.path === '/home/news' || to.path === '/home/message'
      // æ–¹å¼2 é€šè¿‡è‡ªå®šä¹‰ meta{} è‡ªå®šä¹‰å…ƒä¿¡æ¯ åœ¨è¿›è¡Œæ ¡éªŒ
      if (to.meta.isAuth) { //åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´æƒ
          // åˆ¤æ–­ ç¼“å­˜ä¸­æ˜¯å¦æœ‰è¯¥å¯¹åº”çš„å€¼
        if (localStorage.getItem('test') === 'abcd') {
          next()
        } else {
          alert('æ— æƒè®¿é—®ğŸ˜€');
        }
      } else {
      
        next()

      }
    })
  ```
#### å…¨å±€åç½®è·¯ç”±å®ˆå«
- å…¨å±€åç½®è·¯ç”±å®ˆå« åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ä¸€æ¬¡ æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
- è¯­æ³•ï¼š` router.afterEach((to,from)=>{})`  åç½®æ²¡æœ‰ next å› ä¸ºåˆ‡æ¢ä¹‹åæ‰ä¼šè§¦å‘
- demo
  ```js
  router.afterEach((to, from) => {
    console.log('åç½®è·¯ç”±å®ˆå«', to, from);
    // åˆ°è¿™é‡Œä½¿ç”¨æ„å‘³ç€ ä¸€å®šåˆ‡æ¢å®Œæ¯• æ‰€ä»¥å¯ä»¥è¿›è¡Œæ“ä½œ
    document.title = to.meta.title || 'æµè§ˆå™¨é¡µç­¾æ ‡é¢˜åå­—'
  })
  ```
#### ç‹¬äº«è·¯ç”±å®ˆå«
- å¯¹å•ä¸ªé¡µé¢è¿›è¡Œå®ˆå« æ‰€ä»¥å°†è§„åˆ™å†™åˆ°å½“å‰è·¯ç”±ä¸Šå³å¯
- è¯­æ³•ï¼š ` beforeEnter (to, from, next) {}`
- ç‹¬äº«è·¯ç”±å®ˆå«åªæœ‰å‰ç½® æ²¡æœ‰åç½®  ä½†æ˜¯å¯ä»¥é…åˆ å…¨å±€åç½®ä½¿ç”¨
- demo
  ```js
     {
        path: 'news',
        name: 'news',
        component: News,
        meta: { isAuth: true, title: 'æ–°é—»' },
        beforeEnter (to, from, next) {
          if (to.meta.isAuth) { //åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´æƒ
            if (localStorage.getItem('test') === 'abcd') {
              next()
            } else {
              alert('æ— æƒè®¿é—®ğŸ˜€');
            }
          } else {
            next()
          }
        }
      },
  ```
#### ç»„ä»¶å†…å®ˆå«
- beforeRouteEnter (to, from, next) {}   è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
- beforeRouteLeave (to, from, next) {}   ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
- demo
  ```js
     beforeRouteEnter(to, from, next) {
    if (to.meta.isAuth) {
      //åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´æƒ
      if (localStorage.getItem("test") === "abcd") {
        next();
      } else {
        alert("æ— æƒè®¿é—®ğŸ˜€");
      }
    } else {
      next();
    }
    },
  beforeRouteLeave(to, from, next) {
    console.log(to, from);
    next();
  },
  ```
### hash å’Œ history è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼   
1. å¯¹äºä¸€ä¸ªurlæ¥è¯´ï¼Œä»€ä¹ˆæ˜¯hashå€¼ï¼Ÿ#åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯hashå€¼
2. hashå€¼ä¸ä¼šåŒ…å«åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå³ï¼šhashå€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨
3. hashæ¨¡å¼ï¼š
   1. åœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·ï¼Œä¸ç¾è§‚ 
   2. è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•
   3. å…¼å®¹æ€§è¾ƒå¥½ã€‚
4. history æ¨¡å¼ï¼š
   1. åœ°å€å¹²å‡€ï¼Œç¾è§‚ ã€‚
   2. å…¼å®¹æ€§å’Œhashæ¨¡å¼ç›¸æ¯”ç•¥å·®ã€‚
   3. åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜ã€‚
   4. ä½¿ç”¨nodejséƒ¨ç½²æ—¶ è§£å†³historyçš„404 å®‰è£…åŒ…  yarn add connect-history-api-fallback
### åŠ¨æ€è·¯ç”±
- åŠ¨æ€çš„è·¯å¾„å‚æ•° ä»¥å†’å·å¼€å¤´ :xxx   
- demo
  ```html
    <div id='app'>
        <router-link to="/one/a">ONE1</router-link>
        <router-link to="/one/b">ONE2</router-link>
        <router-link to="/one/c">ONE3</router-link>
        <router-link to="/one/d">ONE4</router-link>
        <router-link to="/two">TWO</router-link>
        <router-view></router-view>
    </div>
    <script>
        // ç»„ä»¶
        const One = {
            // åœ¨ VueRouter å®ä¾‹å¤– ä½¿ç”¨ route å‰é¢è¦åŠ  $
            // $route.params.id è·å–è·¯ç”±å‚æ•°
            template: '<h1>é¡µé¢1 é‡Œé¢çš„ç¬¬{{$route.params.abc}} ä¸ª</h1>'
        }
        const Two = {
            template: '<h1>é¡µé¢2</h1>'
        }
        // åˆ›å»ºè·¯ç”±å®ä¾‹å¯¹è±¡
        const router = new VueRouter({
            routes: [
                //åŠ¨æ€çš„è·¯å¾„å‚æ•° ä»¥å†’å·å¼€å¤´ :xxx  ä¸æ˜¯å›ºå®šçš„ 
                { path: '/one/:abc', component: One },
                { path: '/two', component: Two }
            ]
        })
        var vm = new Vue({
            el: '#app',
            router,
        })
    </script>
  ```
## å…¶ä»–
- è°ƒè¯•å·¥å…·ä¸­ ä¸€ä¸ª root ä»£è¡¨ä¸€ä¸ªvueå®ä¾‹å¯¹è±¡

### Object.defineProperty(obj, prop, descriptor) æ–¹æ³•è¯¦æƒ…ä¸æ¡ˆä¾‹
- è¯­æ³•
  - objï¼šè¦å®šä¹‰å±æ€§çš„å¯¹è±¡
  - propï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°æˆ– Symbol
  - descriptorï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦
    - get(){return value}  å±æ€§çš„  getteræ–¹æ³•
    - set(value){}   å±æ€§çš„ setteræ–¹æ³•
- demo
    ```js
    // éœ€æ±‚ï¼š
    // 1ï¼ç»™pæ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§: fullName= firstName + '-' + lastName
    // 2ï¼å¦‚æœä¿®æ”¹äº†firstName/lastName,furllNameè‡ªåŠ¨æ”¹å˜ä¸ºå¯¹åº”çš„å€¼
    // 3ï¼å¦‚æœä¿®æ”¹äº†fullNameï¼ŒfirstNameå’ŒlastNameä¹Ÿè‡ªåŠ¨æ”¹å˜ä¸ºå¯¹åº”çš„å€¼

    const p = {
        firstName: 'A',
        lastName: 'B'
    }

    Object.defineProperty(p, 'fullName', {

        get() {
            //*å‡½æ•°å›è°ƒçš„ä¸‰ä¸ªé—®é¢˜?  ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ?  ç”¨æ¥åšä»€ä¹ˆ?  thisæŒ‡å‘è° 
            // å½“è¯»å–å±æ€§å€¼æ—¶è‡ªåŠ¨è°ƒç”¨set() ,å°†å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå±æ€§å€¼ï¼Œthisæ˜¯å±æ€§å€¼æ‰€åœ¨çš„å¯¹è±¡
            console.log(this);
            // return p.firstName + "-" + p.lastName
            return this.firstName + "-" + this.lastName
        },
        set(value) {
            // å½“ä¿®æ”¹äº†å±æ€§å€¼æ—¶è‡ªåŠ¨è°ƒç”¨set()ï¼Œç”¨æ¥ç›‘è§†å±æ€§å€¼çš„å˜åŒ–ï¼Œthisæ˜¯å±æ€§æ‰€åœ¨çš„å¯¹è±¡
            console.log(this);

            console.log(value);

            // å½“set()æ‰§è¡Œè¯´æ˜fullNameå‘ç”Ÿæ”¹å˜ è·å–åˆ°æ”¹å˜å€¼ åˆ†å‰²åˆ†åˆ«èµ‹å€¼
            const names = value.split('-')

            this.firstName = names[0]
            this.lastName = names[1]

        }
    })

    // å®Œæˆç¬¬ä¸€æ­¥
    console.log(p.fullName); //A-B
    // å®Œæˆç¬¬äºŒæ­¥
    p.firstName = 'C'
    p.lastName = 'D'
    console.log(p.fullName); //A-B

    // ç¬¬ä¸‰æ­¥
    p.fullName = 'Y-Z'

    console.log(p.firstName, p.lastName);

    ```


### event.target è§¦å‘äº‹ä»¶çš„å¯¹è±¡ (æŸä¸ªDOMå…ƒç´ ) çš„å¼•ç”¨
-  event.target.tagName è¿”å›å…ƒç´ å

###
- methods:{} 
  - åœ¨methodsä¸­éœ€è¦å¯¹dataå†…éƒ¨çš„æ•°æ®å‘ç”Ÿæ›´æ–° éœ€è¦è·å–å®ä¾‹ä¸Šçš„å±æ€§ æ‰å¯ä»¥ä¿®æ”¹
  - åœ¨methodsä¸­ä½¿ç”¨es6ç®­å¤´å‡½æ•° thisæŒ‡å‘ä¸º window ä½¿ç”¨æ™®é€šå‡½æ•° thisæŒ‡å‘ä¸ºVueå®ä¾‹

- el æŒ‡å®šelementé€‰æ‹©å™¨
  - æä¾›ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå·²å­˜åœ¨çš„ DOM å…ƒç´ ä½œä¸º Vue å®ä¾‹çš„æŒ‚è½½ç›®æ ‡ã€‚å¯ä»¥æ˜¯ CSS é€‰æ‹©å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª HTMLElement å®ä¾‹

### å…¨å±€é…ç½®
- è®¾ç½®ä½¿ç”¨å¼€å‘ç‰ˆæœ¬vue.js ä¸æ˜¾ç¤ºæç¤º `Vue.config.productionTip = false`

### 
- vue ä¸­ ä½†å‡¡ç”±vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼Œéƒ½ä¸è¦å†™æˆç®­å¤´å‡½æ•° å¦åˆ™ä¼šæŒ‡å‘ window è€Œä¸æŒ‡å‘ vueå®ä¾‹
### ä»€ä¹ˆæ˜¯æ•°æ®å“åº”å¼ï¼Ÿ
- 1.dataæ•°æ®å‘ç”Ÿå˜åŒ– é¡µé¢æ¸²æŸ“ä¹Ÿå‘ç”Ÿå˜åŒ– 
- 2.é¡µé¢æ¸²æŸ“å‘ç”Ÿå˜åŒ– dataæ•°æ®ä¹Ÿå‘ç”Ÿå˜åŒ–
###
- someå’Œeveryå¯¹æ•°ç»„çš„éå†ï¼šsomeæ˜¯æ•°ç»„ä¸­åªè¦æœ‰ä¸€ä¸ªç¬¦åˆæ¡ä»¶å°±è¿”å›trueï¼Œeveryæ˜¯æ¯ä¸€ä¸ªå…ƒç´ éƒ½ç¬¦åˆæ¡ä»¶æ‰è¿”å›trueï¼Œå¦åˆ™è¿”å›false
